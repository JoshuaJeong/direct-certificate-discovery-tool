<?xml version="1.0" encoding="UTF-8"?>
<project
    name="web-webtest"
    basedir="."
    default="all"
    xmlns:dcdt="antlib:gov.hhs.onc.dcdt.ant"
    xmlns:dcdt-webtest="antlib:gov.hhs.onc.dcdt.web.webtest.ant"
    xmlns:props="antlib:org.apache.ant.props"
    xmlns:webtest="antlib:com.canoo.webtest">
    
    <description>Ant project for Direct Certificate Discovery Tool (DCDT) web application Canoo webtest based testing.</description>
    
    <property name="maven.classpath" value="${java.class.path}"/>
    
    <property name="project.basedir" value="${basedir}/../../.."/>
    <property name="project.basedir.all" value="${project.basedir}/.."/>
    
    <import file="${project.basedir.all}/dcdt-core/src/main/scripts/ant-core.xml" as="" prefixSeparator=""/>
    
    <taskdef resource="webtestTaskdefs.properties" classpath="${maven.classpath}" uri="antlib:com.canoo.webtest"/>
    <taskdef resource="net/sf/antcontrib/antlib.xml" classpath="${maven.classpath}"/>
    <taskdef resource="org/apache/ant/props/antlib.xml" classpath="${maven.classpath}" uri="antlib:org.apache.ant.props"/>
    <taskdef file="${project.basedir.all}/dcdt-core/src/main/scripts/antlib-core.xml" uri="antlib:gov.hhs.onc.dcdt.ant"/>
    <taskdef file="${project.basedir.all}/dcdt-web/src/test/scripts/antlib-web-webtest.xml" uri="antlib:gov.hhs.onc.dcdt.web.webtest.ant"/>
    
    <target name="web-webtest-home">
        <dcdt-webtest:test name="web-webtest-home-title">
            <webtest:steps>
                <webtest:invoke description="Invoke home." url="/"/>
                <webtest:verifytitle description="Verify home title." text="${dcdt.web.home.title}"/>
            </webtest:steps>
        </dcdt-webtest:test>
    </target>
    
    <target name="web-webtest-init">
        <var file="${project.basedir.all}/dcdt-web/target/dcdt-web-test/WEB-INF/classes/web/web-messages.properties"/>
    </target>
    
    <target name="all" depends="core,web-webtest-init,web-webtest-home"/>
</project>